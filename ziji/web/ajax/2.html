<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    姓名:<input type="text" id="username">
    <span id="uSpan"></span><br>
</body>
<script>
    //1.为绑定失去焦点事件
    document.getElementById("username").onblur = function () {
        //2.创建XMLHttpRequest核心对象
        let xmlHttp = new XMLHttpRequest();
        //3打开链接
        let username = document.getElementById("username").value;
        xmlHttp.open("post", "a", true);
        // POST发送请求必须设置请求头
        xmlHttp.setRequestHeader("Content-type", "application/json");
        // xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        //4.发送请求
        let cx = {
            username: "username",
            age: "20"
        }
        // alert(JSON.stringify(cx))
        xmlHttp.send(JSON.stringify(cx));
        // xmlHttp.send(JSON.stringify({username:username,age:"20"}));
        // xmlHttp.send("username="+username);
        //5处理响应
        xmlHttp.onreadystatechange = function () {
            //判断请求响应是否成功
            if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {
                //将响应数据显示到标签
                document.getElementById("uSpan").innerHTML = xmlHttp.responseText;
            }
        }
    }
</script>
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>

</html>