<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input type="file" id="aa">
    <button id="q"></button>
</body>
<script>
    let qq = document.getElementById("q");
    qq.onclick = aaa;
    let qw

    function aaa() {
        let a = document.getElementById("aa").files[0];
        var file = a;
        var reader = new FileReader();
        reader.readAsDataURL(file);
        console.log();
        reader.onload = function (e) {
            qw = this.result;
            alert(qw)
            let xmlHttp = new XMLHttpRequest();
            xmlHttp.open("post", "b", true);
            xmlHttp.setRequestHeader("Content-type","application/json");
            xmlHttp.send("add="+this.result);
            xmlHttp.onreadystatechange = function () {
                if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {
                    // let b = xmlHttp.responseText
                    // document.getElementById("a1").innerText = b;
                    // aa()
                }
            }
    
        }
    }
</script>

</html>